创建子进程
程序shell执行命令
创建进程
为新任务数据结构分配内存
将新任务结构指针放入任务数组中
复制shell进程的页表给str1进程共享
设置str1进程任务状态
设置str1任务状态段TSS所需的数据
设置新任务的代码和数据段基址、限长并复制页表
设置新任务的代码和数据段基址、限长并复制页表
设置段基址到LDT
设置str1进程的新数据结构
加载str1进程
do_execve()初始化
寻找对应的文件节点号
检查执行文件的文件类型和执行权限
读取执行文件的第一块数据到高速缓冲区
对执行文件的头结构数据进行处理
提供运行参数
重启进程
信号复位
释放之前共享的页表
重新设置段限长
设置task_struct
设置eip和esp跳转到用户程序执行
缺页中断
缺页中断处理
缺页中断处理
程序执行
缺页中断
缺页中断处理
程序退出
程序退出处理开始
释放内存页
置空操作
进程设置状态和退出码
信号传递
退出完成
重新调度函数运行
程序执行命令
程序执行
打开文件
系统调用
产生许可的文件模式
寻找空闲项
进程对应文件句柄指向搜索到的文件结构
获取文件节点
获取文件枝梢节点、文件名以及长度
取inode节点
get_dir()操作
遍历路径名字符串
dir_namei()操作结束
读取对应目录项
读取文件块
调用iget()获取inode号
寻找指定节点inode
iget操作
连接到f上
打开文件操作结束
读取文件开始
执行file_read()
读取操作file_read()
读取操作file_read()
file_read()读取结束
写入文件a
写入开始
写入文件操作结束
file_write()操作完成
关闭文件a
关闭文件a
程序退出
进程终止
